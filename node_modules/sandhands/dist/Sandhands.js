function r(t,e){if(void 0===e&&(e=!1),"object"==typeof t&&null!==t){if(Array.isArray(t)){for(var n=0;n<t.length;n++){var o=t[n];if(!0===e&&(o=r(o,!0)),null!==o)return o}return null}for(var a=Object.values(t),i=0;i<a.length;i++){var l=a[i];if(!0===e&&(l=r(l,!0)),null!==l)return l}return null}return t}function t(r,t,e,n){if(!Array.isArray(t))return"Expected Array";var o=n.firstAsStandard,a=n.strict,i=n.minLength,l=n.maxLength,s=n.length;e===Array&&(e=[],n.hasOwnProperty("strict")||(a=!1));var f=[].concat(e);if(n.hasOwnProperty("firstAsStandard")||n.hasOwnProperty("standard")||1!==e.length||(o=!0),!0===n.firstAsStandard&&n.hasOwnProperty("standard"))throw new Error("Cannot both specify standard manually and set firstAsStandard to true.");var u=!0===o||n.hasOwnProperty("standard"),c=n.standard||null;if(!0===o){if(e.length<1)throw new Error("Missing First Array Value for First As Standard");c=f.splice(0,1)[0]}if(!n.hasOwnProperty("minLength")&&(f.length>0||!0===u)&&(i=1),"number"==typeof i&&t.length<i)return"Array Too Short";if(n.hasOwnProperty("maxLength")&&t.length>l)return"Array Too Long";if(n.hasOwnProperty("length")&&t.length!==s)return"Incorrect Array Length";var p=[];return Array.prototype.forEach.call(t,function(t,n){if(f.hasOwnProperty(n)){var o=r(t,e[n]);null!==o&&(p[n]=o)}else if(u){var i=r(t,c);null!==i&&(p[n]=i)}else!0===a&&(p[n]="Invalid Index #"+n)}),!0===a&&f.forEach(function(r,e){Object.prototype.hasOwnProperty.call(t,e)||(p[e]="Missing Index #"+e)}),p.length<1?null:p}var e=Object.freeze(["equalTo","validate","nullable"]),n=new Map([[String,Object.freeze(["trimmed","regex","minLength","maxLength","length","allowed","banned","lowercase","uppercase","email","whitespace"])],[Number,Object.freeze(["allowNaN","finite","min","max","even","odd","integer"])]]);Object.defineProperties(n,{set:{get:function(){throw new Error("cannot Modify")},configurable:!1},delete:{get:function(){throw new Error("cannot Modify")},configurable:!1}}),Object.freeze(n);var o=Object.freeze(["strict","standard","allOptional","optionalProps","bannedProps","class"]),a=Object.freeze(["strict","firstAsStandard","minLength","maxLength","length","standard"]),i=Object.freeze([]),l=Object.freeze({universal:e,primitives:n,object:o,array:a,function:i});function s(r,t,e){return e.indexOf(r)===t}var f={email:{_:String,email:!0,lowercase:!0},username:{_:String,regex:/^[a-zA-Z\-0-9]+$/,trimmed:!0,minLength:3,lowercase:!0,validate:[function(r){return!r.startsWith("-")||"Username cannot begin with a dash"},function(r){return!r.endsWith("-")||"Username cannot end with a dash"},function(r){return!r.includes("--")||"Username cannot include consecutive dashes"}]},password:{_:String,minLength:8},zipCode:{_:String,regex:/(^\d{5}$)|(^\d{5}-\d{4}$)/}};try{var u=require("is-my-ip-valid")();f.IP={_:String,validate:function(r){return u(r)}}}catch(r){}function c(r){if("string"==typeof r){if(!f.hasOwnProperty(r))throw new Error('Custom Format "'+r+'" Not Found');return f[r]}return r}function p(){return(p=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r}).apply(this,arguments)}function h(r,t){return(h=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(r,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function y(r,t,e){return(y=d()?Reflect.construct:function(r,t,e){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(r,n));return e&&h(o,e.prototype),o}).apply(null,arguments)}var w=Object.freeze(function(){});function O(){var t=q.apply(void 0,[].slice.call(arguments)),e=r(t,!0);if(null!==e){var n=new Error(e);throw n.sanitationDetails=t,n}return!0}function m(){return null===q.apply(void 0,[].slice.call(arguments))}var g=function(){function r(){var r=T.apply(void 0,[].slice.call(arguments));L(r),this.format=p({},r.options||{},{_:r.format||w})}var t=r.prototype;return t.setOptions=function(r){if("object"!=typeof r||null===r)throw new Error("Options must be an object");r.hasOwnProperty("_")&&console.warn('Warning: Setting the primary format (the "_" property) through the setOptions, this could cause unintended behavior.'),Object.assign(this.format,r)},t.setOption=function(r,t){if("string"!=typeof r)throw new Error("option name must be a string");this.format[r]=t},t.getOption=function(r){if("string"!=typeof r)throw new Error("option name must be a string");return this.format[r]},t.details=function(r){return V(r,this.format)},t.valid=function(r){return m(r,this.format)},t.sanitize=function(r){return O(r,this.format)},t.Or=function(){throw[].slice.call(arguments),new Error("This feature has been temporarily disabled.")},t.And=function(){throw[].slice.call(arguments),new Error("This feature has been temporarily disabled.")},t.Not=function(){throw[].slice.call(arguments),new Error("This feature has been temporarily disabled.")},r}(),v=["details","valid","sanitize"],b={get:function(r,t){if(r===P)return P[t];if(!(r instanceof g))throw new Error("Expected Format Instance");if("constructor"===t)throw new Error("Cannot retrieve the contructor");if("format"===t)return r.format;if("function"==typeof r[t]){var e=r[t];return v.includes(t)?e.bind(r):function(){return e.apply(r,[].slice.call(arguments)),new Proxy(r,b)}}return function(){var e=[].slice.call(arguments),n=!(e.length>0)||e[0];return r.format[t]=n,new Proxy(r,b)}},construct:function(r,t){return P.apply(void 0,t)}};function P(){var r=[].slice.call(arguments);if(r.length<1)throw new Error("Must supply a format.");return new Proxy(y(g,r),b)}var E=new Proxy(P,b);function x(r){if("object"==typeof r&&null!==r){if(r instanceof g)return x(r.format);if(r.hasOwnProperty("_"))return p({},r,{_:x(r._)});var t=Array.isArray(r)?[]:{};return Object.entries(r).forEach(function(r){t[r[0]]=x(r[1])}),t}return r}function A(r,t,e){void 0===e&&(e={});for(var n=Object.assign({},e),o=[],a=[],i=[],l=!0,f=0;l;){for(l=!1;t instanceof g;)if(t=x(t),l=!0,++f>=100)throw new Error("Max loop size exceeded");for(;"string"==typeof t;)if(t=c(t),l=!0,++f>=100)throw new Error("Max loop size exceeded");for(;F(t);)if(delete(n=Object.assign({},t,n))._,t=t._,l=!0,++f>=100)throw new Error("Max loop size exceeded")}if(n.hasOwnProperty("_or")){var u=n._or;o.includes(u)||(Array.isArray(u)?o=o.concat(u).filter(s):o.push(u)),delete n._or}if(n.hasOwnProperty("_and")){var p=n._and;a.includes(p)||(Array.isArray(p)?a=a.concat(p).filter(s).map(function(t){return r(t)}):a.push(p)),delete n._and}if(n.hasOwnProperty("_not")){var h=n._not;i.includes(h)||(Array.isArray(h)?i=i.concat(h).filter(s).map(function(t){return r(t)}):i.push(h)),delete n._not}if((o.length>0)+(a.length>0)+(i.length>0)>1)throw new Error("Cannot use more than one boolean logic condition of differing kinds at the same depth, Total ORFormats: "+o.length+", Total ANDFormats: "+a.length+", total NOTFormats: "+i.length);return{options:n,format:t,ORFormats:o,ANDFormats:a,NOTFormats:i}}function F(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)&&r.hasOwnProperty("_")}function j(r){var t=r.strict,e=r.optionalProps,n=r.allOptional,o=r.bannedProps,a=r.class;return r.hasOwnProperty("strict")&&"boolean"!=typeof t?"Invalid Strict Option":r.hasOwnProperty("allOptional")&&"boolean"!=typeof n?"Invalid All Optional Option":!r.hasOwnProperty("optionalProps")||Array.isArray(e)&&!e.some(function(r){return"string"!=typeof r})?!r.hasOwnProperty("bannedProps")||Array.isArray(o)&&!o.some(function(r){return"string"!=typeof r})?r.hasOwnProperty("class")&&"object"!=typeof a&&"function"!=typeof a?"A class must be a function or an object":null:"Banned Props must be an array of strings":"Optional Props must be an array of strings"}var N=[String,Number,Boolean,null,void 0],I=new Map([[String,function(r){var t=r.regex,e=r.minLength,n=r.length,o=r.allowed,a=r.banned,i=r.lowercase,l=r.uppercase,s=r.email,f=r.whitespace,u=r.trimmed;return r.hasOwnProperty("email")&&"boolean"!=typeof s?"Invalid Email Option":r.hasOwnProperty("minLength")&&("number"!=typeof e||!isFinite(e)||e<0)?"Invalid Minimum Length Option":r.hasOwnProperty("maxLength")&&("number"!=typeof r.maxLength||!isFinite(r.maxLength)||r.maxLength<0)?"Invalid Maximum Length Option":r.hasOwnProperty("length")&&("number"!=typeof n||!isFinite(n)||n<0)?"Invalid Length Option":r.hasOwnProperty("allowed")&&("string"!=typeof o||o.length<1)?"Invalid Allowed Option":r.hasOwnProperty("banned")&&("string"!=typeof a||a.length<1)?"Invalid Banned Option":r.hasOwnProperty("lowercase")&&"boolean"!=typeof i||r.hasOwnProperty("uppercase")&&"boolean"!=typeof l?"Invalid Lowercase Option":r.hasOwnProperty("whitespace")&&"boolean"!=typeof f?"Invalid Whitespace Option":!r.hasOwnProperty("regex")||t instanceof RegExp?r.hasOwnProperty("trimmed")&&"boolean"!=typeof u?"Invalid Trimmed Option":r.hasOwnProperty("AllOptional")&&"boolean"!=typeof r.allOptionsOptional?"Invalid All Optional Option":null:"Invalid Regex Option"}],[Number,function(r){var t=r.allowNaN,e=r.finite,n=r.min,o=r.max,a=r.even,i=r.odd;return r.hasOwnProperty("allowNaN")&&"boolean"!=typeof t?"Invalid AllowNaN Option":r.hasOwnProperty("finite")&&"boolean"!=typeof e?"Invalid Finite Option":r.hasOwnProperty("min")&&"number"!=typeof n&&!isFinite(n)?"Invalid Min Option":!r.hasOwnProperty("max")||"number"==typeof o&&isFinite(o)?r.hasOwnProperty("even")&&"boolean"!=typeof a?"Invalid Even Option":r.hasOwnProperty("odd")&&"boolean"!=typeof i?"Invalid Odd Option":null:"Invalid Max Option"}]]),_=new Map([[String,"String"],[Number,"Number"],[Boolean,"Boolean"],[null,"Null"],[void 0,"Undefined"],[Function,"Function"]]);function L(r){var t=r.format,e=r.options;if("object"!=typeof e||null===e)return"Options are not an Object";var n=[],o="Internal Error";if(N.includes(t)){if(o=_.get(t),l.primitives.has(t)&&(n=l.primitives.get(t)),I.has(t)){var a=I.get(t)(e);if(null!==a)return a}}else if(Array.isArray(t)||t===Array)o="Array",n=l.array;else if("object"==typeof t&&null!==t||t===Object){o="Object",n=l.object;var i=j(e);if(null!==i)return i}else if("function"==typeof t||t===Function){o="Function",n=l.function.concat(l.object);var s=j(e)||null;if(null!==s)return s}else if(t!==w)return"Invalid Format";if(e.hasOwnProperty("validate")&&"function"!=typeof e.validate)return"Expected a function for the validation option";if(e.hasOwnProperty("nullable")&&"boolean"!=typeof e.nullable)return"Expected a boolean for the nullable option";n=n.concat(l.universal);var f=Object.keys(e).filter(function(r){return!n.includes(r)});return f.length>0?'Invalid Option "'+f[0]+'" for Format '+o:null}function M(r){var t=r.options;if("object"!=typeof t||null===t)throw new Error("Options Invalid");var e=L(r);if(null!==e){var n=new Error(e);throw n.inlineOptions=r,n}return!0}function T(){var r=[].slice.call(arguments);if(r.length<1)throw new Error("Must specify a format");var t=A.apply(void 0,[T].concat(r));try{M(t)}catch(r){throw r}return t}function S(r,t,e,n){var o=n.strict;e===Object&&(e={},"boolean"!=typeof o&&(o=!1));var a={},i=n.standard,l=n.allOptional,s=n.optionalProps,f=void 0===s?[]:s,u=n.bannedProps,c=void 0===u?[]:u,p=n.class;if(n.hasOwnProperty("class")){var h=p.constructor.name;if(!(t instanceof p))return"Expected a member of the provided class"+("string"==typeof h&&h.length>1?' "'+h+'"':"")}"boolean"!=typeof o&&n.hasOwnProperty("standard")&&(o=!1),"boolean"!=typeof o&&(o=!0);var d=Object.keys(t);return(!0===o||n.hasOwnProperty("standard"))&&d.forEach(function(o){if(!e.hasOwnProperty(o))if(n.hasOwnProperty("standard")){var l=r(t[o],i);null!==l&&(a[o]=l)}else a[o]='Invalid Property "'+o+'"'}),n.hasOwnProperty("bannedProps")&&c.forEach(function(r){t.hasOwnProperty(r)&&!a[r]&&(a[r]='Invalid Property "'+r+'"')}),Object.entries(e).forEach(function(e){var n=e[0],i=e[1];if(!a[n]){var s=T(i);i=s.format;var u=s.options;if(Object.prototype.hasOwnProperty.call(t,n)){var c=r(t[n],i,u);null!==c&&(a[n]=c)}else!0===l||!0!==o||"string"!=typeof n||f.includes(n)||(a[n]="Property "+n+" Required")}}),Object.keys(a).length<1?null:a}var R=new Map([[String,{minLength:1}],[Number,{allowNaN:!1,finite:!0}],[Boolean,{}],[null,{}],[void 0,{}],[Array,{}],[Object,{}]]),z=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function C(r,t,e){var n=e.ORFormats,o=e.ANDFormats,a=e.NOTFormats,i=e.options,l=e.format;if(a.length>0)for(var s=0,f=a.length;s<f;s++)if(null===r(t,a[s]))return"Something was NOT allowed";if(o.length>0)for(var u=0,c=o.length;u<c;u++){var p=r(t,o[u]);if(null!==p)return p}var h=r(t,l,i);if(null===h)return null;if(n.length>0){for(var d=0,y=n.length;d<y;d++)if(null===r(t,n[d]))return null;return h}throw new Error("Function not supposed to reach the end")}function D(r,t,e,n){return"function"!=typeof t?"Expected Function":null}function k(r,t){if(r===t)return!0;if(typeof r!=typeof t)return!1;if(B(r)||B(t))return r===t;if(Object.getPrototypeOf(r)!==Object.getPrototypeOf(t))return!1;if("function"==typeof r&&r.toString()!==t.toString())return!1;for(var e in r){if(!(e in t))return!1;if(!k(r[e],t[e]))return!1}for(var n in t)if(!(n in r))return!1;return!0}function B(r){return r!==Object(r)}var U=new Map([[String,function(r,t){var e=t.regex,n=t.minLength,o=t.maxLength,a=t.length,i=t.allowed,l=t.banned,s=t.lowercase,f=t.uppercase,u=t.email,c=t.whitespace,p=t.trimmed;if("string"!=typeof r)return"Expected String";if(t.hasOwnProperty("email")&&!0===u&&!z.test(r))return"Email Invalid";if(t.hasOwnProperty("minLength")&&r.length<n)return"Too short";if(t.hasOwnProperty("maxLength")&&r.length>o)return"Too long";if(t.hasOwnProperty("length")&&r.length!=a)return"Incorrect Length";if(t.hasOwnProperty("allowed")){var h=Array.from(r).find(function(r){return!i.includes(r)});if(h)return'Character not allowed "'+h+'"'}if(t.hasOwnProperty("banned")){var d=Array.from(l).find(function(t){return r.includes(t)});if(d)return'Character not allowed "'+d+'"'}if(t.hasOwnProperty("lowercase")&&!0===s&&r.toLowerCase()!=r)return"Lowercase only";if(t.hasOwnProperty("uppercase")&&!0===f&&r.toUpperCase()!=r)return"Uppercase only";if(t.hasOwnProperty("whitespace")&&!1===c&&/\s/.test(r))return"No whitespace";if(t.hasOwnProperty("regex")&&!0!==e.test(r))return"Failed regex";if(t.hasOwnProperty("trimmed")&&!0===p){if(/^\s/.test(r))return"Cannot start with whitespace";if(/\s$/.test(r))return"Cannot end with whitespace"}return null}],[Number,function(r,t){if("number"!=typeof r)return"Expected Number";var e=t.allowNaN,n=t.finite,o=t.min,a=t.max,i=t.even,l=t.odd,s=t.integer;if(t.hasOwnProperty("allowNaN")){if("boolean"!=typeof e)throw new Error("Invalid AllowNaN Option");if(!1===e&&isNaN(r))return"NaN not allowed"}if(t.hasOwnProperty("finite")){if("boolean"!=typeof n)throw new Error("Invalid Finite Option");if(!0===n&&!isFinite(r)&&!isNaN(r))return"Infinity not allowed"}if(t.hasOwnProperty("min")){if("number"!=typeof o&&!isFinite(o))throw new Error("Invalid Min Option");if(r<o)return"Too small"}if(t.hasOwnProperty("max")){if("number"!=typeof a||!isFinite(a))throw new Error("Invalid Max Option");if(r>a)return"Too great"}if(t.hasOwnProperty("even")){if("boolean"!=typeof i)throw new Error("Invalid Even Option");if(!0===i&&r%2!=0)return"Not even"}if(t.hasOwnProperty("odd")){if("boolean"!=typeof l)throw new Error("Invalid Odd Option");if(!0===l&&r%2!=1)return"Not odd"}if(t.hasOwnProperty("integer")){if("boolean"!=typeof s)throw new Error("Invalid Integer Option");if(!0===s&&r%1!=0)return"Not an integer"}return null}],[Boolean,function(r,t){return"boolean"!=typeof r?"Expected Boolean":null}],[null,function(r,t){return null!==r?"Expected Null":null}],[void 0,function(r,t){return void 0!==r?"Expected Undefined":null}]]);function q(r){var e=T.apply(void 0,[].slice.call(arguments,1)),n=e.format,o=e.options,a=e.ORFormats,i=e.ANDFormats,l=e.NOTFormats;if(a.length>0||i.length>0||l.length>0)return C(q,r,e);if(!0===o.nullable&&null===r)return null;if(o.hasOwnProperty("equalTo")&&!k(r,o.equalTo))return"Input Not Equal";if(n===w);else if(U.has(n)){R.has(n)&&(o=Object.assign({},R.get(n),o));var s=U.get(n)(r,o);if(null!==s)return s}else if(Array.isArray(n)||n===Array){var f=t(q,r,n,o=Object.assign({},R.get(Array),o));if(null!==f)return f}else if("object"==typeof n||n===Object){if("object"!=typeof r||null===r||Array.isArray(r))return"Expected an Object";var u=S(q,r,n,o=Object.assign({},R.get(Object),o));if(null!==u)return u}else{if("function"!=typeof n&&n!==Function)throw new Error("Invalid Format");var c=D(0,r);if(null!==c)return c;var p=S(q,r,n,o);if(null!==p)return p}if(o.hasOwnProperty("validate"))if(Array.isArray(o.validate))for(var h=0;h<o.validate.length;h++){var d=o.validate[h](r);if("string"==typeof d){if(d.length<1)throw new Error("Custom Error Message Must be longer than 0 characters.");return d}if("boolean"!=typeof d)throw new Error("Validation Function Returned Unexpected output");if(!1===d)return"Failed Validation Function"}else{var y=o.validate(r);if("string"==typeof y){if(y.length<1)throw new Error("Custom Error Message Must be longer than 0 characters.");return y}if("boolean"!=typeof y)throw new Error("Validation Function Returned Unexpected output");if(!1===y)return"Failed Validation Function"}return null}function V(){return q.apply(void 0,[].slice.call(arguments))}exports.ANY=w,exports.And=function(){var r=[].slice.call(arguments);if(r.length<2)throw new Error("Must supply at least 2 formats");return r.forEach(function(r){return L(r)}),{_:r[0],_and:r.slice(1)}},exports.F=E,exports.Format=E,exports.Not=function(){var r=[].slice.call(arguments);if(r.length<1)throw new Error("Must supply at least 1 format");return r.forEach(function(r){return L(r)}),{_:w,_not:r}},exports.Or=function(){var r=[].slice.call(arguments);if(r.length<2)throw new Error("Must supply at least 2 formats");return r.forEach(function(r){return L(r)}),{_:r[0],_or:r.slice(1)}},exports.allowedOptions=l,exports.customFormat=function r(t,e){if(1!==arguments.length||"object"!=typeof arguments[0]||null===arguments[0]){if("string"!=typeof t||t.length<1)throw new Error("Custom Format Name Invalid");var n=L(e);if(null!==n)throw new Error('Custom Format Invalid, "'+e+'"');f[t]=e}else Object.entries(arguments[0]).forEach(function(t){r(t[0],t[1])})},exports.details=V,exports.getFormatErrors=function(r){if(arguments.length<1)throw new Error("Must supply a format");return L(r)},exports.reconstructFormat=function(r){var t=r.format,e=r.ANDFormats,n=r.NOTFormats,o=r.ORFormats,a=Object.keys(r.options).length>0,i=Object.keys(o).length>0,l=Object.keys(e).length>0,s=Object.keys(n).length>0;if(a||i||l||s){var f={_:t};return a&&Object.assign(f,r.options),i&&(f._or=ORFormat),l&&(f._and=ANDFormat),s&&(f.NOTFormats=NOTFormat),f}return r.format},exports.reduceFormat=function(){var r=[].slice.call(arguments);if(!Array.isArray(r))throw new Error("Please supply an array of arg(s)");if(r.length>2)throw new Error("Received too many arguments");var t=T.apply(void 0,r),e=t.format;return(Object.keys(t.options).length>0||t.ORFormats.length>0||t.ANDFormats.length>0||t.NOTFormats.length>0)&&(e=p({_:e},t.options)),t.ORFormats.length>0&&(e._or=t.ORFormats),t.ANDFormats.length>0&&(e._and=t.ANDFormats),t.NOTFormats.length>0&&(e._not=t.NOTFormats),e},exports.resolveFormat=T,exports.sandhandsExpress=function(){var r=arguments;return function(t,e,n){if(!t.hasOwnProperty("body"))return e.status(500).send("Expected Body");var o=V.apply(void 0,[t.body].concat([].slice.call(r)));if(null!==o)return e.status(400).json(o);n()}},exports.sanitize=O,exports.setDefault=function(r,t){if(function(r){return!("object"!=typeof r||null===r||Object.getOwnPropertyNames(r).length>0)}(r)&&(r=Object),Array.isArray(r)&&0===r.length&&(r=[]),!R.has(r))throw new Error("Invalid Type");var e=L(r===Object?{}:r===Array?[]:r);if(null!==e)throw new Error('Invalid Default Options, Error: "'+e+'"');R.set(r,Object.assign({},R.get(r),t))},exports.valid=m;
//# sourceMappingURL=Sandhands.js.map
